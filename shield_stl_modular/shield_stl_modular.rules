OVERCLOCK
{
	DAMAGE_DRAIN_FACTOR = 1 / 200%
	EMP_RESIST = 33%
	ROTATION_SPEED_FACTOR = 2/3
	HEAT_PER_SECOND = 40	// For each segment
	HEAT_PER_DAMAGE = 0.6
}
HEAT_TO_RESOURCE = &<./Data/statuses/heat/heat.rules>/STATUS_TO_RESOURCE_RATIO
HEAT_TO_STATUS = &<./Data/statuses/heat/heat.rules>/RESOURCE_TO_STATUS_RATIO

Part : <./Data/ships/terran/base_part_terran_overclock.rules>/Part
{
	NameKey = "Parts/KebechetSTLmodularShield"
	IconNameKey = "Parts/KebechetSTLmodularShieldIcon"
	DescriptionKey = "Parts/KebechetSTLmodularShieldDesc"
	ID = swefpifh.Kebechet_STL_modularShield
	EditorGroup = "Defenses"
	Resources
	[
		[steel, 120]
		[diamond, 3]
		[processor, 4] 
	]
	AIValueFactor = 5
	Size = [4, 4]
	PhysicalRect = [0, 0, 4, 4] // For backwards compatibility with old shield generators.
	SaveRect = &PhysicalRect
	SelectionPriority = 1
	SelectionTypeID = "shield_gen_stl"
	SelectionTypeByRotation = false
	MaxHealth = 10000
	TypeCategories = [defense, uses_power, bubble_shield]
	ReceivableBuffs : ^/0/ReceivableBuffs [BubbleCapacityReversed, BubbleResistance, BubbleResistanceBonus, BubbleRadius, BubbleRadiusBase, BubbleRadiusOverclock, BubbleRadiusFinal, BubbleRotation, BubbleRotationPenalty]
	PenetrationRectType = Normal
	AllowedDoorLocations
	[
		[1, -1] // Haut
		[2, -1]
		
		[1, 4] // Bas
		[2, 4]
		
		[-1, 1] // Gauche
		[-1, 2]
		
		[4, 1] // Droite
		[4, 2]
	]
	
	IsRotateable = false
	IgnoreRotationForMirroredSelection = true
	IsFlippable = false
	
	ForceManhattanPathInPart = true
	BlockedTravelCells
	[
		[1, 1]
		[1, 2]
		[2, 1]
		[2, 2]
	]

	EditorIcon
	{
		Texture
		{
			File = "icon.png"
			SampleMode = Linear
		}
		Size = [64, 64]
	}
	Components : ^/0/Components, <purple/purple.rules>/Components, <blue/blue.rules>/Components, <green/green.rules>/Components, <orange/orange.rules>/Components, <red/red.rules>/Components, <yellow/yellow.rules>/Components
	{

		// --------------------------------- START TOGGLES
		
		// -----------------------------------------------
		// COLOURS TOGGLES -------------------------------
		// -----------------------------------------------

		ToggleColour
		{
			Type = UIToggle
			ToggleID = "Kebechet_ToggleID_Colours"
			Default = 0
			AlwaysAllowInBuildMode = true
			RequiresCommand = false
		}
		
		ToggleColour_Purple
		{
			Type = ModeToggle
			Mode = ToggleColour
			OnMode = 0
		}
		ToggleColour_Blue :		ToggleColour_Purple	{ OnMode = 1 }
		ToggleColour_Orange :	ToggleColour_Purple	{ OnMode = 2 }
		ToggleColour_Red :		ToggleColour_Purple	{ OnMode = 3 }
		ToggleColour_Yellow :	ToggleColour_Purple	{ OnMode = 4 }
		ToggleColour_Green :	ToggleColour_Purple	{ OnMode = 5 }

		// -----------------------------------------------
		// DISPLAY TOGGLES -------------------------------
		// -----------------------------------------------
		
		ToggleDisplay
		{
			Type = UIToggle
			ToggleID = "Kebechet_ToggleID_Display"
			Default = 0
			AlwaysAllowInBuildMode = true
			RequiresCommand = false
		}

		ToggleDisplay_On
		{
			Type = ModeToggle
			Mode = ToggleDisplay
			OnMode = 0
		}

		ToggleDisplay_Off : ToggleDisplay_On	{ OnMode = 1 }

		// -----------------------------------------------
		// PROXY -----------------------------------------
		// -----------------------------------------------
		
		ColoursProxy
		{
			Type = ToggleProxy
			ComponentID = ColoursSet
		}
		ColoursSet
		{
			Type = MultiToggle
			Toggles = [ToggleColour_Purple, ToggleColour_Blue, ToggleColour_Orange, ToggleColour_Red, ToggleColour_Yellow, ToggleColour_Green]
			Mode = Any
		}

		DisplayProxy
		{
			Type = ToggleProxy
			ComponentID = DisplaySet
		}
		DisplaySet
		{
			Type = MultiToggle
			Toggles = [ToggleDisplay_Off, ToggleDisplay_On]
			Mode = Any
		}

		// --------------------------------- END TOGGLES
		
		IsOperational
		{
			Type = MultiToggle
			Toggles = [PowerToggle, CombinedBatteryStorage, ScorchedToggle, &~/Part/^/0/OVERCLOCK_OPERATIONAL, IsOperational_AllSegments_ToggleProxy] // There is no problem with CombinedBatteryStorage and IsOperational_AllSegments_ToggleProxy, as the first one can never be depleated without first depleating the second one due to RemoveMode
			Mode = All
		}
		
		CanOperate
		{
			Type = MultiToggle
			Toggles = [PowerToggle, ScorchedToggle, &~/Part/^/0/OVERCLOCK_OPERATIONAL]
			Mode = All
		}
		
		IsModular
		{
			Type = BuffToggle
			BuffType = BubbleCapacityReversed
		}
		
		Size	// Used for Modular Shield Batteries to know that they connected to a Large Bubble Shield
		{
			Type = StaticValue
			Value = 2
		}
		
		IsOperationalBubble
		{
			Type = ToggleProxy
			ComponentID = IsOperational
		}
		
		IsOperationalNonOverclocked
		{
			Type = MultiToggle
			Toggles = [ IsOperational, { Toggle=IsOverclocked; Invert=true } ]
			Mode = All
		}

		CommandConsumptionToggle
		{
			Type = MultiToggle
			Toggles = [PowerToggle, ScorchedToggle]
			Mode = All
		}

		PowerToggle
		{
			Type = UIToggle
			ToggleID = "on_off"
			Default = 1
			RequiresCommand = false
		}

		ScorchedToggle
		{
			Type = StatusToggle
			StatusType = cosmoteer.scorched
			MinStatusValue = 1
			Invert = true
		}

		CommandConsumer
		{
			Type = CommandConsumer
			OperationalToggle = CommandConsumptionToggle
			CommandPoints = 8
		}

		// Normal Batteries

		BatteryStorage
		{
			Type = MultiResourceStorage
			ResourceType = battery
			IsDrainable = true
			ResourceStorages = [CombinedBatteryStorage_Front, CombinedBatteryStorage_FrontRight, CombinedBatteryStorage_BackRight, CombinedBatteryStorage_Back, CombinedBatteryStorage_BackLeft, CombinedBatteryStorage_FrontLeft]
			ReceiveResourceMediaEffects = &/COMMON_EFFECTS/PowerDeliver
			RemoveMode = DistributeEvenly
			DrainResistance
			{
				BaseValue = 0
				Modifiers
				[
					{
						Type = BuffRemap
						BuffType = Overclock
						ModificationMode = Add
						RemapFrom = [0, 1]
						RemapTo = [0, (&~/OVERCLOCK/EMP_RESIST)]
					}
					{
						Type = Status
						StatusType = cosmoteer.shield_overload
						ModificationMode = Subtract
					}
				]
			}
		}
		ProgressBarSegments
		{
			Type = ProgressBar
			OperationalToggle = IsOperational
			ShowProgressFor = BatteryStorage
			LowColor = [0, 0, 255]
			HighColor = [0, 0, 255]
			FullColor = [0, 0, 255]
			Height = 10
		}

		CombinedBatteryStorage
		{
			Type = MultiResourceStorage
			ResourceType = battery
			IsDrainable = false
			ResourceStorages = [BatteryStorage_Front, BatteryStorage_FrontRight, BatteryStorage_BackRight, BatteryStorage_Back, BatteryStorage_BackLeft, BatteryStorage_FrontLeft]
			ReceiveResourceMediaEffects = &/COMMON_EFFECTS/PowerDeliver
			AddMode = DistributeEvenly
		}
		BatteryConsumer
		{
			Type = ResourceConsumer
			ResourceType = battery
			Storage = CombinedBatteryStorage
			DefaultPriority = &/PRIORITIES/Defense_Supply
			ResupplyThreshold = 500
			OperationalToggle = PowerToggle
		}
		
		// All Segments Toggle
		
		Base_BatteryStorage
		{
			Type = MultiResourceStorage
			ResourceType = battery
			ResourceStorages = [BatteryStorage_Front, BatteryStorage_FrontRight, BatteryStorage_BackRight, BatteryStorage_Back, BatteryStorage_BackLeft, BatteryStorage_FrontLeft]
			ToggleOnResources = 23001
		}
		
		IsOperational_AllSegments_On
		{
			Type = MultiToggle
			Toggles = [IsOperational_SegmentLargeFront_On, IsOperational_SegmentLargeFrontRight_On, IsOperational_SegmentLargeBackRight_On, IsOperational_SegmentLargeBack_On, IsOperational_SegmentLargeBackLeft_On, IsOperational_SegmentLargeFrontLeft_On]
			Mode = All
		}
		IsOperational_AllSegments_Off :	IsOperational_AllSegments_On	{ Toggles = [IsOperational_SegmentLargeFront_Off, IsOperational_SegmentLargeFrontRight_Off, IsOperational_SegmentLargeBackRight_Off, IsOperational_SegmentLargeBack_Off, IsOperational_SegmentLargeBackLeft_Off, IsOperational_SegmentLargeFrontLeft_Off] }
		IsOperational_AllSegments_TriggerOn
		{
			Type = ToggleTrigger
			Toggle = IsOperational_AllSegments_On
			TriggerWhenOn = true
			TriggerWhenOff = false
		}
		IsOperational_AllSegments_TriggerOff :	IsOperational_AllSegments_TriggerOn
		{
			Toggle = IsOperational_AllSegments_Off
			TriggerWhenOn = false
			TriggerWhenOff = true
		}
		IsOperational_AllSegments_Toggle
		{
			Type = TriggeredToggle
			OnTrigger = IsOperational_AllSegments_TriggerOn
			OffTrigger = IsOperational_AllSegments_TriggerOff
		}
		IsOperational_AllSegments_ToggleProxy
		{
			Type = MultiToggle
			Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_AllSegments_Toggle]
			Mode = Any
		}
		
		// Segments
		
		IsOperational_SegmentLargeFront_On
		{
			Type = MultiToggle
			Toggles = [BatteryStorage_Front, CanOperate]	// The battery is added otherwise if you build a new Bubble Shield connected to a fully loaded Modular Shield Batteries it won't trigger. The CanOperate is added otherwise if you disable the overclock, togglepower or is scorched it won't trigger.
			ViaBuffs
			{
				OutgoingBuffProviders = [BuffProvider_Top, BuffProvider_Right, BuffProvider_Bottom, BuffProvider_Left]
				ComponentID = IsOperational_ModularProxy_LargeFront
			}
			Mode = All
		}
		IsOperational_SegmentLargeFrontRight_On :	IsOperational_SegmentLargeFront_On
		{
			Toggles = [BatteryStorage_FrontRight, CanOperate]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeFrontRight }
		}
		IsOperational_SegmentLargeBackRight_On :	IsOperational_SegmentLargeFront_On
		{
			Toggles = [BatteryStorage_BackRight, CanOperate]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBackRight }
		}
		IsOperational_SegmentLargeBack_On :		IsOperational_SegmentLargeFront_On
		{
			Toggles = [BatteryStorage_Back, CanOperate]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBack }
		}
		IsOperational_SegmentLargeBackLeft_On :	IsOperational_SegmentLargeFront_On
		{
			Toggles = [BatteryStorage_BackLeft, CanOperate]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBackLeft }
		}
		IsOperational_SegmentLargeFrontLeft_On :	IsOperational_SegmentLargeFront_On
		{
			Toggles = [BatteryStorage_FrontLeft, CanOperate]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeFrontLeft }
		}
		
		IsOperational_SegmentLargeFront_Off
		{
			Type = MultiToggle
			Toggles = [BatteryStorage_Front]
			ViaBuffs
			{
				OutgoingBuffProviders = [BuffProvider_Top, BuffProvider_Right, BuffProvider_Bottom, BuffProvider_Left]
				ComponentID = IsOperational_ModularProxy_LargeFront
			}
			Invert = true
			Mode = Any
		}
		IsOperational_SegmentLargeFrontRight_Off :	IsOperational_SegmentLargeFront_Off
		{
			Toggles = [BatteryStorage_FrontRight]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeFrontRight }
		}
		IsOperational_SegmentLargeBackRight_Off :	IsOperational_SegmentLargeFront_Off
		{
			Toggles = [BatteryStorage_BackRight]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBackRight }
		}
		IsOperational_SegmentLargeBack_Off :		IsOperational_SegmentLargeFront_Off
		{
			Toggles = [BatteryStorage_Back]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBack }
		}
		IsOperational_SegmentLargeBackLeft_Off :	IsOperational_SegmentLargeFront_Off
		{
			Toggles = [BatteryStorage_BackLeft]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeBackLeft }
		}
		IsOperational_SegmentLargeFrontLeft_Off :	IsOperational_SegmentLargeFront_Off
		{
			Toggles = [BatteryStorage_FrontLeft]
			ViaBuffs :	^/0/ViaBuffs	{ ComponentID = IsOperational_ModularProxy_LargeFrontLeft }
		}
		
		IsOperational_SegmentLargeFront_TriggerOn
		{
			Type = ToggleTrigger
			Toggle = IsOperational_SegmentLargeFront_On
			TriggerWhenOn = true
			TriggerWhenOff = false
		}
		IsOperational_SegmentLargeFrontRight_TriggerOn :	IsOperational_SegmentLargeFront_TriggerOn	{ Toggle = IsOperational_SegmentLargeFrontRight_On }
		IsOperational_SegmentLargeBackRight_TriggerOn :		IsOperational_SegmentLargeFront_TriggerOn	{ Toggle = IsOperational_SegmentLargeBackRight_On }
		IsOperational_SegmentLargeBack_TriggerOn :			IsOperational_SegmentLargeFront_TriggerOn	{ Toggle = IsOperational_SegmentLargeBack_On }
		IsOperational_SegmentLargeBackLeft_TriggerOn :		IsOperational_SegmentLargeFront_TriggerOn	{ Toggle = IsOperational_SegmentLargeBackLeft_On }
		IsOperational_SegmentLargeFrontLeft_TriggerOn :		IsOperational_SegmentLargeFront_TriggerOn	{ Toggle = IsOperational_SegmentLargeFrontLeft_On }
		
		IsOperational_SegmentLargeFront_TriggerOff
		{
			Type = ToggleTrigger
			Toggle = IsOperational_SegmentLargeFront_Off
			TriggerWhenOn = true
			TriggerWhenOff = false
		}
		IsOperational_SegmentLargeFrontRight_TriggerOff :	IsOperational_SegmentLargeFront_TriggerOff	{ Toggle = IsOperational_SegmentLargeFrontRight_Off }
		IsOperational_SegmentLargeBackRight_TriggerOff :	IsOperational_SegmentLargeFront_TriggerOff	{ Toggle = IsOperational_SegmentLargeBackRight_Off }
		IsOperational_SegmentLargeBack_TriggerOff :			IsOperational_SegmentLargeFront_TriggerOff	{ Toggle = IsOperational_SegmentLargeBack_Off }
		IsOperational_SegmentLargeBackLeft_TriggerOff :		IsOperational_SegmentLargeFront_TriggerOff	{ Toggle = IsOperational_SegmentLargeBackLeft_Off }
		IsOperational_SegmentLargeFrontLeft_TriggerOff :	IsOperational_SegmentLargeFront_TriggerOff	{ Toggle = IsOperational_SegmentLargeFrontLeft_Off }
		
		IsOperational_SegmentLargeFront_Toggle
		{
			Type = TriggeredToggle
			OnTrigger = IsOperational_SegmentLargeFront_TriggerOn
			OffTrigger = IsOperational_SegmentLargeFront_TriggerOff
		}
		IsOperational_SegmentLargeFrontRight_Toggle :	IsOperational_SegmentLargeFront_Toggle
		{
			OnTrigger = IsOperational_SegmentLargeFrontRight_TriggerOn
			OffTrigger = IsOperational_SegmentLargeFrontRight_TriggerOff
		}
		IsOperational_SegmentLargeBackRight_Toggle :	IsOperational_SegmentLargeFront_Toggle
		{
			OnTrigger = IsOperational_SegmentLargeBackRight_TriggerOn
			OffTrigger = IsOperational_SegmentLargeBackRight_TriggerOff
		}
		IsOperational_SegmentLargeBack_Toggle :			IsOperational_SegmentLargeFront_Toggle
		{
			OnTrigger = IsOperational_SegmentLargeBack_TriggerOn
			OffTrigger = IsOperational_SegmentLargeBack_TriggerOff
		}
		IsOperational_SegmentLargeBackLeft_Toggle :		IsOperational_SegmentLargeFront_Toggle
		{
			OnTrigger = IsOperational_SegmentLargeBackLeft_TriggerOn
			OffTrigger = IsOperational_SegmentLargeBackLeft_TriggerOff
		}
		IsOperational_SegmentLargeFrontLeft_Toggle :	IsOperational_SegmentLargeFront_Toggle
		{
			OnTrigger = IsOperational_SegmentLargeFrontLeft_TriggerOn
			OffTrigger = IsOperational_SegmentLargeFrontLeft_TriggerOff
		}
		
		IsOperational_SegmentLargeFront_ToggleProxy
		{
			Type = MultiToggle
			Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeFront_Toggle]
			Mode = Any
		}
		IsOperational_SegmentLargeFrontRight_ToggleProxy :	IsOperational_SegmentLargeFront_ToggleProxy	{ Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeFrontRight_Toggle] }
		IsOperational_SegmentLargeBackRight_ToggleProxy :	IsOperational_SegmentLargeFront_ToggleProxy	{ Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeBackRight_Toggle] }
		IsOperational_SegmentLargeBack_ToggleProxy :		IsOperational_SegmentLargeFront_ToggleProxy	{ Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeBack_Toggle] }
		IsOperational_SegmentLargeBackLeft_ToggleProxy :	IsOperational_SegmentLargeFront_ToggleProxy	{ Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeBackLeft_Toggle] }
		IsOperational_SegmentLargeFrontLeft_ToggleProxy :	IsOperational_SegmentLargeFront_ToggleProxy	{ Toggles = [{Toggle=IsModular; Invert=true}, IsOperational_SegmentLargeFrontLeft_Toggle] }
		
		IsOperational_LargeFront
		{
			Type = MultiToggle
			Toggles = [PowerToggle, BatteryStorage_Front, ScorchedToggle, IsOperational, IsOperational_SegmentLargeFront_ToggleProxy]
			Mode = All
		}
		IsOperational_LargeFrontRight :	IsOperational_LargeFront	{ Toggles = [PowerToggle, BatteryStorage_FrontRight, ScorchedToggle, IsOperational, IsOperational_SegmentLargeFrontRight_ToggleProxy] }
		IsOperational_LargeBackRight :	IsOperational_LargeFront	{ Toggles = [PowerToggle, BatteryStorage_BackRight, ScorchedToggle, IsOperational, IsOperational_SegmentLargeBackRight_ToggleProxy] }
		IsOperational_LargeBack :		IsOperational_LargeFront	{ Toggles = [PowerToggle, BatteryStorage_Back, ScorchedToggle, IsOperational, IsOperational_SegmentLargeBack_ToggleProxy] }
		IsOperational_LargeBackLeft :	IsOperational_LargeFront	{ Toggles = [PowerToggle, BatteryStorage_BackLeft, ScorchedToggle, IsOperational, IsOperational_SegmentLargeBackLeft_ToggleProxy] }
		IsOperational_LargeFrontLeft :	IsOperational_LargeFront	{ Toggles = [PowerToggle, BatteryStorage_FrontLeft, ScorchedToggle, IsOperational, IsOperational_SegmentLargeFrontLeft_ToggleProxy] }
		
		IsOperationalOverloaded_Front :			IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFront, IsOperationalOverloaded] }
		IsOperationalOverloaded_FrontRight :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontRight, IsOperationalOverloaded] }
		IsOperationalOverloaded_BackRight :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackRight, IsOperationalOverloaded] }
		IsOperationalOverloaded_Back :			IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBack, IsOperationalOverloaded] }
		IsOperationalOverloaded_BackLeft :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackLeft, IsOperationalOverloaded] }
		IsOperationalOverloaded_FrontLeft :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontLeft, IsOperationalOverloaded] }
		
		OverclockedEffectToggle_Front :			IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFront, OverclockedEffectToggle] }
		OverclockedEffectToggle_FrontRight :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontRight, OverclockedEffectToggle] }
		OverclockedEffectToggle_BackRight :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackRight, OverclockedEffectToggle] }
		OverclockedEffectToggle_Back :			IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBack, OverclockedEffectToggle] }
		OverclockedEffectToggle_BackLeft :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackLeft, OverclockedEffectToggle] }
		OverclockedEffectToggle_FrontLeft :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontLeft, OverclockedEffectToggle] }
		
		IsOperationalOverclockedOverloaded_Front :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFront, IsOperationalOverclockedOverloaded] }
		IsOperationalOverclockedOverloaded_FrontRight :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontRight, IsOperationalOverclockedOverloaded] }
		IsOperationalOverclockedOverloaded_BackRight :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackRight, IsOperationalOverclockedOverloaded] }
		IsOperationalOverclockedOverloaded_Back :		IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBack, IsOperationalOverclockedOverloaded] }
		IsOperationalOverclockedOverloaded_BackLeft :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeBackLeft, IsOperationalOverclockedOverloaded] }
		IsOperationalOverclockedOverloaded_FrontLeft :	IsOperational_LargeFront	{ Toggles = [IsOperational_LargeFrontLeft, IsOperationalOverclockedOverloaded] }
		
		BatteryStorage_Front
		{
			Type = ResourceStorage
			ResourceType = battery
			IsDrainable = false
			MaxResources = 4000
			ToggleOnResources = 4000
			DrainOnFtlJump = true
			ReceiveResourceMediaEffects = &/COMMON_EFFECTS/PowerDeliver
		}
		BatteryStorage_FrontRight :	BatteryStorage_Front	{}
		BatteryStorage_BackRight :	BatteryStorage_Front	{}
		BatteryStorage_Back :		BatteryStorage_Front	{}
		BatteryStorage_BackLeft :	BatteryStorage_Front	{}
		BatteryStorage_FrontLeft :	BatteryStorage_Front	{}
		
		CombinedBatteryStorage_Front
		{
			Type = MultiResourceStorage
			ResourceType = battery
			IsDrainable = false
			OperationalToggle = IsOverclocked
			ResourceStorages = [BatteryStorage_Front]
			ViaBuffs
			{
				OutgoingBuffProviders = [BuffProvider_Top, BuffProvider_Right, BuffProvider_Bottom, BuffProvider_Left]
				ComponentID = BatteryStorageProxy_LargeFront
			}
			ReceiveResourceMediaEffects = &/COMMON_EFFECTS/PowerDeliver
			RemoveMode = InReverseOrder
		}
		CombinedBatteryStorage_FrontRight :	CombinedBatteryStorage_Front
		{
			ResourceStorages = [BatteryStorage_FrontRight]
			ViaBuffs : ^/0/ViaBuffs	{ ComponentID = BatteryStorageProxy_LargeFrontRight }
		}
		CombinedBatteryStorage_BackRight :	CombinedBatteryStorage_Front
		{
			ResourceStorages = [BatteryStorage_BackRight]
			ViaBuffs : ^/0/ViaBuffs	{ ComponentID = BatteryStorageProxy_LargeBackRight }
		}
		CombinedBatteryStorage_Back :	CombinedBatteryStorage_Front
		{
			ResourceStorages = [BatteryStorage_Back]
			ViaBuffs : ^/0/ViaBuffs	{ ComponentID = BatteryStorageProxy_LargeBack }
		}
		CombinedBatteryStorage_BackLeft :	CombinedBatteryStorage_Front
		{
			ResourceStorages = [BatteryStorage_BackLeft]
			ViaBuffs : ^/0/ViaBuffs	{ ComponentID = BatteryStorageProxy_LargeBackLeft }
		}
		CombinedBatteryStorage_FrontLeft :	CombinedBatteryStorage_Front
		{
			ResourceStorages = [BatteryStorage_FrontLeft]
			ViaBuffs : ^/0/ViaBuffs	{ ComponentID = BatteryStorageProxy_LargeFrontLeft }
		}
		
		PowerDrain_Front
		{
			Type = ResourceConverter
			OperationalToggle = IsOperational_LargeFront
			FromStorage = BatteryStorage_Front
			FromQuantity = 50
			MinFromQuantityForConversion = 1
			Interval = 1
		}
		PowerDrain_FrontRight :	PowerDrain_Front
		{
			OperationalToggle = IsOperational_LargeFrontRight
			FromStorage = BatteryStorage_FrontRight
		}
		PowerDrain_BackRight :	PowerDrain_Front
		{
			OperationalToggle = IsOperational_LargeBackRight
			FromStorage = BatteryStorage_BackRight
		}
		PowerDrain_Back :	PowerDrain_Front
		{
			OperationalToggle = IsOperational_LargeBack
			FromStorage = BatteryStorage_Back
		}
		PowerDrain_BackLeft :	PowerDrain_Front
		{
			OperationalToggle = IsOperational_LargeBackLeft
			FromStorage = BatteryStorage_BackLeft
		}
		PowerDrain_FrontLeft :	PowerDrain_Front
		{
			OperationalToggle = IsOperational_LargeFrontLeft
			FromStorage = BatteryStorage_FrontLeft
		}
		
		// Out of Power Toggle
		
		HasEnergy	// The BatteryStorages are the last at being depletead due to RemoveMode and so the segment will be always disabled when they are depleated
		{
			Type = MultiToggle
			Toggles = [BatteryStorage_Front, BatteryStorage_FrontRight, BatteryStorage_BackRight, BatteryStorage_Back, BatteryStorage_BackLeft, BatteryStorage_FrontLeft]
			Mode = All
		}
		
		// Modular Battery
		
		BuffProvider_Top
		{
			Type = AreaBuffProvider
			BuffType = BubbleCapacity
			BuffArea = [1, -1, 2, 1]
			OperationalToggle = CanOperate
			Criteria
			{
				Top = -2
				Bottom = 0
			}
		}
		BuffProvider_Right : BuffProvider_Top
		{
			BuffArea = [4, 1, 1, 2]
			Criteria
			{
				Left = 4
				Right = 6
			}
		}

		BuffProvider_Bottom : BuffProvider_Top
		{
			BuffArea = [1, 4, 2, 1]
			Criteria
			{
				Top = 4
				Bottom = 6
			}
		}
		BuffProvider_Left : BuffProvider_Top
		{
			BuffArea = [-1, 1, 1, 2]
			Criteria
			{
				Left = -2
				Right = 0
			}
		}
		
		// Rotation
		
		RotationTime
		{
			Type = ValueAccumulator
			AccumulatingToggle = IsOperational
			AccumulationRate
			{
				BaseValue = (&../../RotationReset/MinAmount) / 10
				Modifiers
				[
					{
						Type = BuffRemap
						BuffType = Overclock
						ModificationMode = Multiply
						RemapFrom = [0, 1]
						RemapTo = [1, &~/OVERCLOCK/ROTATION_SPEED_FACTOR]
					}
					{
						Type = Buff
						BuffType = BubbleRotationPenalty
						ModificationMode = Divide
					}
				]
			}
			AccumulationTriggers
			[
				{
					Trigger = RotationReset
					Value = 0
					Operation = 2
				}
			]
		}
		
		RotationReset
		{
			Type = ThresholdTrigger
			AmountFrom = RotationTime
			MinAmount = 3
		}
		
		BuffProvider_Rotation
		{
			Type = SelfBuffProvider
			ChainsFromBuffType = BubbleRotation
			BuffType = BubbleRotationPenalty
			BuffAmount = { BaseValue=0; BuffType=BubbleRotation; BuffMode=Add; }
		}
		
		One	{ Type = StaticValue; Value = -1 }
		Two	{ Type = StaticValue; Value = -2 }
		
		RotationTime2
		{
			Type = MultiValue
			Values = [ RotationTime, One]
			Mode = 0
		}
		RotationTime3
		{
			Type = MultiValue
			Values = [ RotationTime, Two]
			Mode = 0
		}
		
		TransformRotation1
		{
			Type = TransformLerp
			ValueFrom = RotationTime
			Location = [2, 2]
			StartRotation = 0d
			EndRotation = 120d
		}
		TransformRotation2 :		TransformRotation1
		{
			ValueFrom = RotationTime2
			ChainedTo = TransformRotation1
			Location = [0, 0]
		}
		TransformRotationFinal :	TransformRotation2
		{
			ValueFrom = RotationTime3
			ChainedTo = TransformRotation2
		}
		
		// Self Buffs
		
		BuffProvider_Radius
		{
			Type = SelfBuffProvider
			ChainsFromBuffType = BubbleRadius
			BuffType = BubbleRadiusBase
			BuffAmount = { BaseValue=0; BuffType=BubbleRadius; BuffMode=Add; }
		}
		
		BuffProvider_RadiusOverclocked :	BuffProvider_Radius	{ BuffType = BubbleRadiusOverclock }
				
		ValueLerp_Radius0
		{
			Type = ValueLerp
			InputValue = Value0
			OutputRange = [ {BaseValue = 0, BuffType = BubbleRadiusBase; BuffMode = Add}, {BaseValue = 0, BuffType = BubbleRadiusOverclock; BuffMode = Add}]
		}
		ValueLerp_Radius1 :	ValueLerp_Radius0	{ InputValue = Value1 }
		
		UpdateTimer
		{
			Type = Timer
			Duration = 1/30
			AutoStart = true
			Repeats = true
		}
		UpdateModes
		{
			Type = ModeCycle
			IncrementTrigger = UpdateTimer
		}
		UpdateMode0
		{
			Type = ModeToggle
			Mode = UpdateModes
			OnMode = 0
		}
		UpdateMode1 :	UpdateMode0	{ OnMode = 1 }
		UpdateMode0Trigger
		{
			Type = ToggleTrigger
			Toggle = UpdateMode0
			TriggerWhenOn = true
			TriggerWhenOff = false
		}
		UpdateMode1Trigger :	UpdateMode0Trigger	{ Toggle = UpdateMode1 }
		ToggleSelector
		{
			Type = TriggeredToggle
			OnTrigger = UpdateMode0Trigger
			OffTrigger = UpdateMode1Trigger
		}
		Constant
		{
			Type = StaticValue
			Value = 2	// Anything works
		}
		Value0
		{
			Type = ToggleValueSelector
			Toggle = ToggleSelector
			ToggleOnValue = Constant
			ToggleOffValue = OverclockStateValue
		}
		Value1 :	Value0
		{
			ToggleOnValue = OverclockStateValue
			ToggleOffValue = Constant
		}
		ValueLerp_RadiusFinal
		{
			Type = ToggleValueSelector
			Toggle = ToggleSelector
			ToggleOffValue = ValueLerp_Radius0
			ToggleOnValue = ValueLerp_Radius1
		}
		
		BuffProvider_Radius_Final
		{
			Type = SelfBuffProvider
			ChainsFromBuffType = BubbleRadius
			BuffType = BubbleRadiusFinal
			BuffAmount = 1
			BuffMultiplier = ValueLerp_RadiusFinal
		}
		
		BaseResistanceBonus
		{
			Type = StaticValue
			Value = 1.5
		}
		OverclockResistanceBonus
		{
			Type = StaticValue
			Value = 3
		}
		BuffProvider_Overclock_Resistance
		{
			Type = SelfBuffProvider
			OperationalToggle = IsOverclocked
			BuffType = BubbleResistanceBonus
			ChainsFromBuffType = BubbleResistance
			BuffAmount = { BaseValue=0; BuffType=BubbleResistance; BuffMode=Add; }
			BuffMultiplier = OverclockResistanceBonus
		}
		BuffProvider_Resistance :	BuffProvider_Overclock_Resistance
		{
			InvertOperationalToggle = true
			BuffAmount = { BaseValue=0; BuffType=BubbleResistance; BuffMode=Add; }
			BuffMultiplier = BaseResistanceBonus
		}
		
		// Disable

		IsOperationalProxy
		{
			Type = MultiToggle
			Toggles = [ProxyBatteryStorage]
			Mode = All
		}
		
		ProxyBatteryStorage
		{
			Type = ResourceStorage
			ResourceType = battery
			MaxResources = 0
			ToggleOnResources = 1
			DrainOnFtlJump = true
			ReceiveResourceMediaEffects = &/COMMON_EFFECTS/PowerDeliver
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		// ARCSHIELD ORIGINAL - START //////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		ArcShield : <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/ArcShield
		{
			Radius
			{
				BaseValue = 15
				Modifiers
				[
					{
						Type = Buff
						BuffType = BubbleRadiusFinal
						ModificationMode = Multiply
					}
				]
			}
			Arc = 60d
			ChainedTo = TransformRotationFinal
			OperationalToggle = IsOperationalProxy
			PenetrationResistance = [ { BaseValue= 20; BuffType=BubbleResistanceBonus; BuffMode=Add; }, 0]
			BlockedByOperationalParts = false
			DrainResourcesFrom = ProxyBatteryStorage
			ResourceDrainPerDamage
			{
				BaseValue = .4
				Modifiers
				[
					{
						Type = Status
						StatusType = cosmoteer.shield_overload
						ModificationMode = Multiply
						BaseStatusValue = 1
					}
					{
						Type = BuffRemap
						BuffType = Overclock
						ModificationMode = Multiply
						RemapFrom = [0, 1]
						RemapTo = [1, &~/OVERCLOCK/DAMAGE_DRAIN_FACTOR ]
					}
				]
			}
			Rotation = -90d
			Location = [0, 0]

			BlueprintArcSprite	{}

			ShieldMediaEffects
			[
				: <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/ArcShield/ShieldMediaEffects/0
				{
					Radius = &~/Part/Components/ArcShield/Radius
					Arc = &~/Part/Components/ArcShield/Arc
					FadeInTime = 0
					FadeOutTime = 0
					ArcSprite : ^/0/ArcSprite
					{
						_xScale = 1.5
//						Size = [0, 3]
					}
					
				}
				: <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/ArcShield/ShieldMediaEffects/1	{}
			]
		}
		
		OverclockModeToggle_Invert
		{
			Type = MultiToggle
			Toggles = [OverclockModeToggle]
			Invert = true
			Mode = All
		}

		BlueprintArc_Front
		{
			Type = ArcSprite
			VisibilityToggle = OverclockModeToggle_Invert
			Location = [&../../TransformRotation1/Location/0, &../../TransformRotation1/Location/1]
			Rotation = &<stats.rules>/Stats/ArcShield_Front/Rotation
			Radius = &../ArcShield/Radius/BaseValue
			Arc = &../ArcShield/Arc
			SpriteSegments = &../ArcShield/BlueprintArcSpriteSegments
			Sprite : &../ArcShield/^/0/BlueprintArcSprite	{}
		}
		BlueprintArc_FrontRight :	BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_FrontRight/Rotation }
		BlueprintArc_BackRight :	BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_BackRight/Rotation }
		BlueprintArc_Back :			BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_Back/Rotation }
		BlueprintArc_BackLeft :		BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_BackLeft/Rotation }
		BlueprintArc_FrontLeft :	BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_FrontLeft/Rotation }

		OverclockTweenToggle
		{
			Type = ThresholdToggle
			ValueFrom = OverclockStateValue
			MinAmount = 1
		}
		
		OverclockedEffectToggle
		{
			Type = MultiToggle
			Toggles = [OverclockTweenToggle, IsOperationalOverclocked]
			Mode = All
		}
		
		Overclock_BlueprintArc_Front :	BlueprintArc_Front
		{
			VisibilityToggle = OverclockModeToggle
			Sprite : &<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/Overclock_BlueprintArc/Sprite	{}
		}
		Overclock_BlueprintArc_FrontRight :	Overclock_BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_FrontRight/Rotation }
		Overclock_BlueprintArc_BackRight :	Overclock_BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_BackRight/Rotation }
		Overclock_BlueprintArc_Back :		Overclock_BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_Back/Rotation }
		Overclock_BlueprintArc_BackLeft :	Overclock_BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_BackLeft/Rotation }
		Overclock_BlueprintArc_FrontLeft :	Overclock_BlueprintArc_Front	{ Rotation = &<stats.rules>/Stats/ArcShield_FrontLeft/Rotation }
		
		OverclockEffect :	&<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/OverclockEffect
		{
			OperationalToggle = IsOperationalProxy
			ContinuousEffects
			[
				: ../^/0/ContinuousEffects/0
				{
					Radius = &~/Part/Components/ArcShield/Radius
					Arc = &~/Part/Components/ArcShield/Arc
				}
			]
		}
        
		OverloadValue
		{
			Type = BuffableValue
			Value
			{
				BaseValue = 0
				Modifiers
				[
					{
						Type = Status
						StatusType = cosmoteer.shield_overload
						ModificationMode = Replace
						BaseStatusValue = 0
					}
				]
			}
		}
		
		IsOverloaded
		{
			Type = ThresholdToggle
			ValueFrom = OverloadValue
			MinAmount = 0.01
		}
		
		IsOperationalOverloaded
		{
			Type = MultiToggle
			Toggles = [ IsOperational, IsOverloaded ]
			Mode = All
		}
		
		IsOperationalOverclockedOverloaded
		{
			Type = MultiToggle
			Toggles = [ IsOperational, IsOverloaded, OverclockedEffectToggle ]
			Mode = All
		}
		
		OverloadEffect :	&<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/OverloadEffect
		{
			OperationalToggle = IsOperationalProxy
			ContinuousEffects
			[
				: ../^/0/ContinuousEffects/0
				{
					Radius = &~/Part/Components/ArcShield/Radius
					Arc = &~/Part/Components/ArcShield/Arc
				}
			]
		}
		
		OverclockOverloadEffect :	&<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/OverclockOverloadEffect
		{
			OperationalToggle = IsOperationalProxy
			ContinuousEffects
			[
				: ../^/0/ContinuousEffects/0
				{
					Radius = &~/Part/Components/ArcShield/Radius
					Arc = &~/Part/Components/ArcShield/Arc
				}
			]
		}

		IsOperationalOverclocked_Front
		{
			Type = MultiToggle
			Toggles = [IsOperational_LargeFront, IsOperationalOverclocked]
			Mode = All
		}
		IsOperationalOverclocked_FrontRight :	IsOperationalOverclocked_Front	{ Toggles = [IsOperational_LargeFrontRight, IsOperationalOverclocked] }
		IsOperationalOverclocked_BackRight :	IsOperationalOverclocked_Front	{ Toggles = [IsOperational_LargeBackRight, IsOperationalOverclocked] }
		IsOperationalOverclocked_Back :			IsOperationalOverclocked_Front	{ Toggles = [IsOperational_LargeBack, IsOperationalOverclocked] }
		IsOperationalOverclocked_BackLeft :		IsOperationalOverclocked_Front	{ Toggles = [IsOperational_LargeBackLeft, IsOperationalOverclocked] }
		IsOperationalOverclocked_FrontLeft :	IsOperationalOverclocked_Front	{ Toggles = [IsOperational_LargeFrontLeft, IsOperationalOverclocked] }

		// Overclock / Thermal network
		OverclockHeatProducer_Front
		{
			Type = ResourceConverter
			OperationalToggle = IsOperationalOverclocked_Front
			HEAT_PER_INTERVAL = ceil((&~/OVERCLOCK/HEAT_PER_SECOND) * (&Interval))
			ToQuantity = (&HEAT_PER_INTERVAL) * (&~/HEAT_TO_RESOURCE)
			ToStorage = &~/Part/^/0/HEAT_TARGET_STORAGE
			Interval = 0.5
		}
		OverclockHeatProducer_FrontRight :	OverclockHeatProducer_Front	{ OperationalToggle = IsOperationalOverclocked_FrontRight }
		OverclockHeatProducer_BackRight :	OverclockHeatProducer_Front	{ OperationalToggle = IsOperationalOverclocked_BackRight }
		OverclockHeatProducer_Back :		OverclockHeatProducer_Front	{ OperationalToggle = IsOperationalOverclocked_Back }
		OverclockHeatProducer_BackLeft :	OverclockHeatProducer_Front	{ OperationalToggle = IsOperationalOverclocked_BackLeft }
		OverclockHeatProducer_FrontLeft :	OverclockHeatProducer_Front	{ OperationalToggle = IsOperationalOverclocked_FrontRight }
		
		OverclockHitHeatProducer
		{
			Type = ResourceChange
			ResourceStorage = &~/Part/^/0/HEAT_TARGET_STORAGE
			// Provides the post-resistance damage value as EffectScale
			Trigger = Overclock_ArcShieldProxy
			Amount
			{
				BaseValue = "round((&~/OVERCLOCK/HEAT_PER_DAMAGE) * (&~/HEAT_TO_RESOURCE), 0)"
				Modifiers
				[
					{
						Type = EffectScale
						ModificationMode = Multiply
					}
					{
						Type = Status
						StatusType = cosmoteer.shield_overload
						ModificationMode = Multiply
						BaseStatusValue = 1
					}
					{
						Type = Buff
						BuffType = Overclock
						ModificationMode = Multiply
					}
				]
			}
		}
		
		Overclock_ArcShieldProxy
		{
			Type = MultiTrigger
			Triggers = [Overclock_ArcShieldProxy_LargeFront, Overclock_ArcShieldProxy_LargeFrontRight, Overclock_ArcShieldProxy_LargeBackRight, Overclock_ArcShieldProxy_LargeBack, Overclock_ArcShieldProxy_LargeBackLeft, Overclock_ArcShieldProxy_LargeFrontLeft]
		}
		
		Overclock_ArcShieldProxy_LargeFront
		{
			Type = TriggerProxy
			ComponentID = ArcShield_Front
			ProxyToggle = IsOperationalOverclocked
		}
		Overclock_ArcShieldProxy_LargeFrontRight :	Overclock_ArcShieldProxy_LargeFront
		{
			ComponentID = ArcShield_FrontRight
			ProxyToggle = IsOperationalOverclocked
		}
		Overclock_ArcShieldProxy_LargeBackRight :	Overclock_ArcShieldProxy_LargeFront
		{
			ComponentID = ArcShield_BackRight
			ProxyToggle = IsOperationalOverclocked
		}
		Overclock_ArcShieldProxy_LargeBack :	Overclock_ArcShieldProxy_LargeFront
		{
			ComponentID = ArcShield_Back
			ProxyToggle = IsOperationalOverclocked
		}
		Overclock_ArcShieldProxy_LargeBackLeft :	Overclock_ArcShieldProxy_LargeFront
		{
			ComponentID = ArcShield_BackLeft
			ProxyToggle = IsOperationalOverclocked
		}
		Overclock_ArcShieldProxy_LargeFrontLeft :	Overclock_ArcShieldProxy_LargeFront
		{
			ComponentID = ArcShield_FrontLeft
			ProxyToggle = IsOperationalOverclocked
		}
		
		OverheatEffects : ^/0/OverheatEffects
		{
			Location = [1, 1.5]
		}
		
		Router
		{
			Type = NetworkRouter
			RouteGenerators
			[
				{
					Type = Simple
					HEAT_INPUT = &~/Part/^/0/HEAT_NETWORK_INPUT
					Routes
					[
						[&../../HEAT_INPUT, Port_TL, 0]
						[&../../HEAT_INPUT, Port_TR, 0]
						[&../../HEAT_INPUT, Port_RT, 0]
						[&../../HEAT_INPUT, Port_RB, 0]
						[&../../HEAT_INPUT, Port_BR, 0]
						[&../../HEAT_INPUT, Port_BL, 0]
						[&../../HEAT_INPUT, Port_LB, 0]
						[&../../HEAT_INPUT, Port_LT, 0]
					]
				}
			]
		}
		Port_TL : ~/Part/^/0/BASE_THERMAL_PORT
		{
			Location = [1, 0]
			Direction = Up
		}
		Port_TR : Port_TL
		{
			Location = [2, 0]
		}
		Port_RT : Port_TL
		{
			Location = [3, 1]
			Direction = Right
		}
		Port_RB : Port_RT
		{
			Location = [3, 2]
		}
		Port_BR : Port_TL
		{
			Location = [2, 3]
			Direction = Down
		}
		Port_BL : Port_BR
		{
			Location = [1, 3]
		}
		Port_LB : Port_TL
		{
			Location = [0, 2]
			Direction = Left
		}
		Port_LT : Port_LB
		{
			Location = [0, 1]
		}
		
		BaseEmitterEffect :	<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/BaseEmitterEffect
		{
			ChainedTo	// Normally chained to ArcShield, but we don't want it to rotate
			FactorMediaEffectsIntensityWith = CombinedBatteryStorage
			MaxMediaEffectsZoom = 12
			Location = [2 + 2.4, 2]
			OperationalToggle = IsOperationalProxy
			MediaEffects
			[
				: &../^/0/MediaEffects/0
				{
					Arc = 360d
					Bucket = Upper1	// So that the emitter can project over the part
				}
			]
		}
		EmitterSoundEffects : BaseEmitterEffect, <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/EmitterSoundEffects
		{
			OperationalToggle = &^/1/OperationalToggle	// IsOperationalNonOverclocked
			MediaEffects :	&^/1/MediaEffects	[]
		}
		Overclock_EmitterSoundEffects : BaseEmitterEffect, <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/Overclock_EmitterSoundEffects
		{
			OperationalToggle = &^/1/OperationalToggle	// IsOperationalOverclocked
			MediaEffects :	&^/1/MediaEffects	[]
		}

		ArcShield_ChainProxy_Front
		{
			Type = ChainableProxy
			ComponentID = ArcShield_Front
		}
		ArcShield_ChainProxy_FrontRight :	ArcShield_ChainProxy_Front	{ ComponentID = ArcShield_FrontRight }
		ArcShield_ChainProxy_BackRight :	ArcShield_ChainProxy_Front	{ ComponentID = ArcShield_BackRight }
		ArcShield_ChainProxy_Back :			ArcShield_ChainProxy_Front	{ ComponentID = ArcShield_Back }
		ArcShield_ChainProxy_BackLeft :		ArcShield_ChainProxy_Front	{ ComponentID = ArcShield_BackLeft }
		ArcShield_ChainProxy_FrontLeft :	ArcShield_ChainProxy_Front	{ ComponentID = ArcShield_FrontLeft }

		ShieldOperationEffects_Front :			<./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/ShieldOperationEffects
		{
			ChainedTo = ArcShield_ChainProxy_Front
			Location = [&~/Part/Components/ArcShield/Radius/BaseValue, 0]
			Toggle = IsOperational_LargeFront
		}
		ShieldOperationEffects_FrontRight :		ShieldOperationEffects_Front
		{
			ChainedTo = ArcShield_ChainProxy_FrontRight
			Toggle = IsOperational_LargeFrontRight
		}
		ShieldOperationEffects_BackRight :		ShieldOperationEffects_Front
		{
			ChainedTo = ArcShield_ChainProxy_BackRight
			Toggle = IsOperational_LargebackRight
		}
		ShieldOperationEffects_Back :			ShieldOperationEffects_Front
		{
			ChainedTo = ArcShield_ChainProxy_Back
			Toggle = IsOperational_LargeBack
		}
		ShieldOperationEffects_BackLeft :		ShieldOperationEffects_Front
		{
			ChainedTo = ArcShield_ChainProxy_BackLeft
			Toggle = IsOperational_LargeBackLeft
		}
		ShieldOperationEffects_FrontLeft :		ShieldOperationEffects_Front
		{
			ChainedTo = ArcShield_ChainProxy_FrontLeft
			Toggle = IsOperational_LargeFrontLeft
		}

		IsOperationalOverclocked_LargeFront
		{
			Type = MultiToggle
			Toggles = [IsOperational_LargeFront, IsOverclocked]
			Mode = All
		}
		IsOperationalOverclocked_LargeFrontRight :	IsOperationalOverclocked_LargeFront	{ Toggles = [IsOperational_LargeFrontRight, IsOverclocked] }
		IsOperationalOverclocked_LargeBackRight :	IsOperationalOverclocked_LargeFront	{ Toggles = [IsOperational_LargeBackRight, IsOverclocked] }
		IsOperationalOverclocked_LargeBack :		IsOperationalOverclocked_LargeFront	{ Toggles = [IsOperational_LargeBack, IsOverclocked] }
		IsOperationalOverclocked_LargeBackLeft :	IsOperationalOverclocked_LargeFront	{ Toggles = [IsOperational_LargeBackLeft, IsOverclocked] }
		IsOperationalOverclocked_LargeFrontLeft :	IsOperationalOverclocked_LargeFront	{ Toggles = [IsOperational_LargeFrontLeft, IsOverclocked] }

		Overclock_StartEffects_Front :	ShieldOperationEffects_Front, <./Data/ships/terran/shield_gen_large/shield_gen_large.rules>/Part/Components/Overclock_StartEffects
		{
			Toggle = IsOperationalOverclocked_LargeFront
			ToggledOffMediaEffects
			ToggledOnMediaEffects : &^/1/ToggledOnMediaEffects	[]
		}
		Overclock_StartEffects_FrontRight :	Overclock_StartEffects_Front	{ Toggle = IsOperationalOverclocked_LargeFrontRight }
		Overclock_StartEffects_BackRight :	Overclock_StartEffects_Front	{ Toggle = IsOperationalOverclocked_LargeBackRight }
		Overclock_StartEffects_Back :		Overclock_StartEffects_Front	{ Toggle = IsOperationalOverclocked_LargeBack }
		Overclock_StartEffects_BackLeft :	Overclock_StartEffects_Front	{ Toggle = IsOperationalOverclocked_LargeBackLeft }
		Overclock_StartEffects_FrontLeft :	Overclock_StartEffects_Front	{ Toggle = IsOperationalOverclocked_LargeFrontLeft }
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		// ARCSHIELD ORIGINAL - END ////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		Shield_Doodad_Graphics
		{
			Type = Graphics
			Location = [2, 2]
			OperationalToggle = IsOperational
			OperationalDoodad
			{
				Layer = "doodads_high"
				//Offset = [0, 0]
				DamageLevels
				[
					{
						File = "doodad_axe.png"
						NormalsFile = "doodad_axe_normals.png"
						Size = [2, 2]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe_RotSpeed_0DMG
					}
					{
						File = "doodad_axe_33.png"
						NormalsFile = "doodad_axe_normals_33.png"
						Size = [2, 2]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe_RotSpeed_33DMG
					}
					{
						File = "doodad_axe_66.png"
						NormalsFile = "doodad_axe_normals_66.png"
						Size = [2, 2]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe_RotSpeed_66DMG
					}
				]
			}
			NonOperationalDoodad
			{
				Layer = "doodads_high"
				DamageLevels
				[
					{
						File = "doodad_axe.png"
						NormalsFile = "doodad_axe_normals.png"
						Size = [2, 2]
					}
					{
						File = "doodad_axe_33.png"
						NormalsFile = "doodad_axe_normals_33.png"
						Size = [2, 2]
					}
					{
						File = "doodad_axe_66.png"
						NormalsFile = "doodad_axe_normals_66.png"
						Size = [2, 2]
					}
				]
			}
		}
		
		Shield_Doodad_Graphics_2
		{
			Type = Graphics
			Location = [2, 2]
			OperationalToggle = IsOperational
			OperationalDoodad
			{
				Layer = "doodads_high"
				//Offset = [0, 0]
				DamageLevels
				[
					{
						File = "doodad_big_axe.png"
						NormalsFile = "doodad_big_axe_normals.png"
						Size = [3, 3]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe2_RotSpeed_0DMG
					}
					{
						File = "doodad_big_axe_33.png"
						NormalsFile = "doodad_big_axe_normals_33.png"
						Size = [3, 3]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe2_RotSpeed_33DMG
					}
					{
						File = "doodad_big_axe_66.png"
						NormalsFile = "doodad_big_axe_normals_66.png"
						Size = [3, 3]
						RotSpeed = &<../colors.rules>/StatsCommon/DoodadAxe2_RotSpeed_66DMG
					}
				]
			}
			NonOperationalDoodad
			{
				Layer = "doodads_high"
				DamageLevels
				[
					{
						File = "doodad_big_axe.png"
						NormalsFile = "doodad_big_axe_normals.png"
						Size = [3, 3]
					}
					{
						File = "doodad_big_axe_33.png"
						NormalsFile = "doodad_big_axe_normals_33.png"
						Size = [3, 3]
					}
					{
						File = "doodad_big_axe_66.png"
						NormalsFile = "doodad_big_axe_normals_66.png"
						Size = [3, 3]
					}
				]
			}
		}

		Graphics
		{
			Type = Graphics
			Location = [2, 2]
			OperationalToggle = IsOperational
			Floor
			{
				Layer = "floors"
				DamageLevels
				[
					{
						File = "floor.png"
						Size = [4, 4]
					}
					{
						File = "floor_33.png"
						Size = [4, 4]
					}
					{
						File = "floor_66.png"
						Size = [4, 4]
					}
				]
			}
			
			Walls
			{
				Layer = "walls"
				DamageLevels
				[
					{
						File = "walls.png"
						Size = [4, 4]
					}
					{
						File = "walls_33.png"
						Size = [4, 4]
					}
					{
						File = "walls_66.png"
						Size = [4, 4]
					}
				]
			}
			
			Roof
			{
				Layer = "roofs"
				DamageLevels
				[
					{
						File = "roof.png"
						NormalsFile = "roof_normals.png"
						Size = [4, 4]
					}
					{
						File = "roof_33.png"
						NormalsFile = "roof_normals_33.png"
						Size = [4, 4]
					}
					{
						File = "roof_66.png"
						NormalsFile = "roof_normals_66.png"
						Size = [4, 4]
					}
				]
			}
		}

		BatterySprites
		{
			Type = ResourceSprites
			Location = [2, 2]
			ResourceStorage = CombinedBatteryStorage
			Layer = "doodads_low"
			ResourceLevels
			[
				{
					File = "batteries1.png"
					Size = [4, 4]
				}
				{
					File = "batteries2.png"
					Size = [4, 4]
				}
				{
					File = "batteries3.png"
					Size = [4, 4]
				}
				{
					File = "batteries4.png"
					Size = [4, 4]
				}
				{
					File = "batteries5.png"
					Size = [4, 4]
				}
				{
					File = "batteries6.png"
					Size = [4, 4]
				}
				{
					File = "batteries7.png"
					Size = [4, 4]
				}
				{
					File = "batteries8.png"
					Size = [4, 4]
				}
				{
					File = "batteries9.png"
					Size = [4, 4]
				}
				{
					File = "batteries10.png"
					Size = [4, 4]
				}
				{
					File = "batteries11.png"
					Size = [4, 4]
				}
				{
					File = "batteries12.png"
					Size = [4, 4]
				}
				{
					File = "batteries13.png"
					Size = [4, 4]
				}
				{
					File = "batteries14.png"
					Size = [4, 4]
				}
				{
					File = "batteries15.png"
					Size = [4, 4]
				}
				{
					File = "batteries16.png"
					Size = [4, 4]
				}
				{
					File = "batteries17.png"
					Size = [4, 4]
				}
				{
					File = "batteries18.png"
					Size = [4, 4]
				}
				{
					File = "batteries19.png"
					Size = [4, 4]
				}
				{
					File = "batteries20.png"
					Size = [4, 4]
				}
				{
					File = "batteries21.png"
					Size = [4, 4]
				}
				{
					File = "batteries22.png"
					Size = [4, 4]
				}
				{
					File = "batteries23.png"
					Size = [4, 4]
				}
				{
					File = "batteries24.png"
					Size = [4, 4]
				}
			]
		}
				
		OperationEffects
		{
			Type = ToggleEffects
			Toggle = IsOperational
			ToggledOnMediaEffects = &/COMMON_EFFECTS/PowerOn
			ToggledOffMediaEffects = &/COMMON_EFFECTS/PowerOff
		}

		ScorchedTrigger
		{
			Type = ToggleTrigger
			Toggle = ScorchedToggle
			TriggerWhenOn = false
		}

		ScorchedEffects
		{
			Type = TriggeredEffects
			Trigger = ScorchedTrigger
			Location = &../DestroyedEffects/Location
			MediaEffects = &/COMMON_EFFECTS/MedPartScorched
		}
		
		DestroyedEffects
		{
			Type = DeathEffects
			MediaEffects = &/COMMON_EFFECTS/MedPartDestroyed
			Location = [2, 2]
		}

		Indicators
		{
			Type = IndicatorSprites
			Location = [2, 2]
			Layer = "indicators"
			Indicators
			[
				// Scorched
				{
					Toggle = ScorchedToggle
					AtlasSprite = &/INDICATORS/Scorched
					HidesIndicators = [1,2,3]
				}
				// Turned off.
				{
					Toggle = PowerToggle
					AtlasSprite
					{
						File = &/INDICATORS/PowerOff
						Size = [1, 1]
					}
				}
				
				// Resetting from overclock
				{
					Toggle = &~/Part/^/0/OVERCLOCK_OPERATIONAL
					AtlasSprite : /INDICATORS/OverclockReset
					{
						Size = [1, 1]
					}
					HidesIndicators = [3]
				}

				// Out of power.
				{
					Toggle = HasEnergy
					AtlasSprite
					{
						File = &/INDICATORS/NoPower
						Size = [1, 1]
					}
				}
			]
		}

		Blueprints
		{
			Type = BlueprintSprite
			File = "blueprints.png"
			Size = [4, 4]
		}
		
		HeatGenerationValue
		{
			Type = StaticValue
			Value = (&~/OVERCLOCK/HEAT_PER_SECOND)
		}
		HeatGenerationStatProvider
		{
			Type = StatProvider
			Stat = HeatGeneration
			OperationalToggle = OverclockModeToggle
			ValueFrom = HeatGenerationValue
		}
	}

	Stats
	{
		PowerCapacity = (&../StatsByCategory/1/Stats/SEGMENT_CAPACITY) * (&../StatsByCategory/0/Stats/SHIELD_SEGMENTS)

		RecPower = (&../StatsByCategory/0/Stats/PowerUsageContinuous) + 0.5
		RecCrew = (&RecPower) * 4
	}
	
	StatsByCategory
	[
		{
			NameKey = "StatCategories/ShieldBubbleLarge"
			Stats
			{
				ShieldRadius = (&~/Part/Components/ArcShield/Radius/BaseValue) - (&~/Part/Components/ArcShield/Location/1)
				ROTATION_SECONDS = (&~/Part/Components/RotationReset/MinAmount) / (&~/Part/Components/RotationTime/AccumulationRate/BaseValue)
				ShieldSpeed = 360 / (&ROTATION_SECONDS)
				SHIELD_SEGMENTS = 6
				PowerUsageContinuous = (&~/Part/Components/PowerDrain_Front/FromQuantity) / (&~/Part/Components/PowerDrain_Front/Interval) / 1000 * (&SHIELD_SEGMENTS)
			}
		}
		{
			NameKey = "StatCategories/ShieldSegmentLarge"
			Stats
			{
				ShieldHP = (&~/Part/Components/BatteryStorage_Front/MaxResources) / (&~/Part/Components/ArcShield/ResourceDrainPerDamage/BaseValue)
				ShieldPenResist = &~/Part/Components/ArcShield/PenetrationResistance/0/BaseValue
				ShieldArc = deg(&~/Part/Components/ArcShield/Arc)
				SEGMENT_CAPACITY = (&~/Part/Components/BatteryStorage_Front/MaxResources) / 1000
			}
		}
	]
	
	SecondaryToolTip
	{
		TitleKey = "StatCategories/Overclocked"
		DescriptionKey = "Parts/KebechetSTLmodularShieldOverclockDesc"
		StatsByCategory
		[
			{
				NameKey = "StatCategories/ShieldBubbleSmall"
				Stats
				{
					ROTATION_SECONDS = (&~/Part/StatsByCategory/0/Stats/ROTATION_SECONDS) / (&~/OVERCLOCK/ROTATION_SPEED_FACTOR)
					ShieldSpeed = 360 / (&ROTATION_SECONDS)
					EMPResistPercentage = (&~/OVERCLOCK/EMP_RESIST) * 100
					HeatGeneration = (&~/OVERCLOCK/HEAT_PER_SECOND) * (&~/Part/StatsByCategory/0/Stats/SHIELD_SEGMENTS)
					HeatPerDamage = (&~/OVERCLOCK/HEAT_PER_DAMAGE)
				}
			}
			{
				NameKey = "StatCategories/ShieldSegmentSmall"
				Stats
				{
					ShieldHP = (&~/Part/StatsByCategory/1/Stats/ShieldHP) / (&~/OVERCLOCK/DAMAGE_DRAIN_FACTOR)	
				}
			}
		]
	}
	
	StatsNotesKey = "Stats/BubbleNotes"
}